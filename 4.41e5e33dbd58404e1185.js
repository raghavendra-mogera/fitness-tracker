(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{CKRj:function(t,e,c){"use strict";c.r(e),c.d(e,"TrainingModule",(function(){return Z}));var n=c("PCNd"),a=c("l7P3"),i=c("tyNb"),r=c("vQgB"),s=c("fXoL"),o=c("ofXK"),b=c("wZkO"),l=c("a318"),u=c("vEl1"),m=c("XiUz"),f=c("3Pt+"),g=c("Wp6s"),p=c("kmnG"),d=c("d3UM"),h=c("FKr1"),S=c("Xa2L"),C=c("bTqV");function T(t,e){if(1&t&&(s.Tb(0,"mat-option",9),s.Ac(1),s.Sb()),2&t){const t=e.$implicit;s.kc("value",t.id),s.Cb(1),s.Cc(" ",t.name," ")}}function y(t,e){if(1&t&&(s.Tb(0,"mat-form-field"),s.Tb(1,"mat-label"),s.Ac(2,"Favorite Excercise"),s.Sb(),s.Tb(3,"mat-select",7),s.zc(4,T,2,2,"mat-option",8),s.gc(5,"async"),s.Sb(),s.Sb()),2&t){const t=s.fc();s.Cb(4),s.kc("ngForOf",s.hc(5,1,t.exercises$))}}function v(t,e){1&t&&s.Ob(0,"mat-spinner")}function x(t,e){if(1&t&&(s.Tb(0,"button",12),s.Ac(1,"Start"),s.Sb()),2&t){s.fc(2);const t=s.pc(2);s.kc("disabled",t.invalid)}}function w(t,e){if(1&t){const t=s.Ub();s.Tb(0,"button",13),s.bc("click",(function(){return s.rc(t),s.fc(2).fetchExercises()})),s.Ac(1,"Fetch Again"),s.Sb()}}function k(t,e){if(1&t&&(s.Tb(0,"mat-card-actions",4),s.zc(1,x,2,1,"button",10),s.gc(2,"async"),s.zc(3,w,2,0,"button",11),s.gc(4,"async"),s.Sb()),2&t){const t=s.fc();s.Cb(1),s.kc("ngIf",s.hc(2,2,t.exercises$)),s.Cb(2),s.kc("ngIf",!s.hc(4,4,t.exercises$))}}let A=(()=>{class t{constructor(t,e){this.trainingService=t,this.store=e}ngOnInit(){this.isLoading$=this.store.select(l.b),this.exercises$=this.store.select(r.b),this.fetchExercises()}onStartTraining(t){this.trainingService.startExercise(t.value.exercise)}fetchExercises(){this.trainingService.fetchAvailableExercices()}}return t.\u0275fac=function(e){return new(e||t)(s.Nb(u.a),s.Nb(a.a))},t.\u0275cmp=s.Hb({type:t,selectors:[["app-new-training"]],decls:14,vars:11,consts:[["fxLayout","","fxLayoutAlign","center center",1,"new-training"],[3,"ngSubmit"],["f","ngForm"],["fxFlex.xs","100%","fxFlex","400px"],["fxLayoutAlign","center"],[4,"ngIf"],["fxLayoutAlign","center",4,"ngIf"],["ngModel","","name","exercise","required",""],[3,"value",4,"ngFor","ngForOf"],[3,"value"],["type","submit","mat-button","",3,"disabled",4,"ngIf"],["type","button","mat-button","",3,"click",4,"ngIf"],["type","submit","mat-button","",3,"disabled"],["type","button","mat-button","",3,"click"]],template:function(t,e){if(1&t){const t=s.Ub();s.Tb(0,"section",0),s.Tb(1,"form",1,2),s.bc("ngSubmit",(function(){s.rc(t);const c=s.pc(2);return e.onStartTraining(c)})),s.Tb(3,"mat-card",3),s.Tb(4,"mat-card-title",4),s.Ac(5,"Time start a workout!"),s.Sb(),s.Tb(6,"mat-card-content",4),s.zc(7,y,6,3,"mat-form-field",5),s.gc(8,"async"),s.gc(9,"async"),s.zc(10,v,1,0,"mat-spinner",5),s.gc(11,"async"),s.Sb(),s.zc(12,k,5,6,"mat-card-actions",6),s.gc(13,"async"),s.Sb(),s.Sb(),s.Sb()}2&t&&(s.Cb(7),s.kc("ngIf",s.hc(8,3,!s.hc(9,5,e.isLoading$)&&e.exercises$)),s.Cb(3),s.kc("ngIf",s.hc(11,7,e.isLoading$)),s.Cb(2),s.kc("ngIf",!s.hc(13,9,e.isLoading$)))},directives:[m.c,m.b,f.t,f.n,f.o,g.a,m.a,g.e,g.c,o.m,p.c,p.g,d.a,f.m,f.p,f.r,o.l,h.n,S.c,g.b,C.a],pipes:[o.b],styles:[".new-training[_ngcontent-%COMP%]{padding:30px}"]}),t})();var z=c("M9IT"),I=c("Dh3D"),O=c("+0xr"),D=c("qFsG");function $(t,e){1&t&&(s.Tb(0,"mat-header-cell",14),s.Ac(1," Date "),s.Sb())}function L(t,e){if(1&t&&(s.Tb(0,"mat-cell"),s.Ac(1),s.gc(2,"date"),s.Sb()),2&t){const t=e.$implicit;s.Cb(1),s.Cc(" ",s.hc(2,1,t.date.toDate())," ")}}function F(t,e){1&t&&(s.Tb(0,"mat-header-cell",14),s.Ac(1," Name "),s.Sb())}function N(t,e){if(1&t&&(s.Tb(0,"mat-cell"),s.Ac(1),s.Sb()),2&t){const t=e.$implicit;s.Cb(1),s.Cc(" ",t.name," ")}}function R(t,e){1&t&&(s.Tb(0,"mat-header-cell",14),s.Ac(1," Calories "),s.Sb())}function E(t,e){if(1&t&&(s.Tb(0,"mat-cell"),s.Ac(1),s.gc(2,"number"),s.Sb()),2&t){const t=e.$implicit;s.Cb(1),s.Cc(" ",s.hc(2,1,t.calories)," ")}}function H(t,e){1&t&&(s.Tb(0,"mat-header-cell",14),s.Ac(1," Duration "),s.Sb())}function Q(t,e){if(1&t&&(s.Tb(0,"mat-cell"),s.Ac(1),s.gc(2,"number"),s.Sb()),2&t){const t=e.$implicit;s.Cb(1),s.Cc(" ",s.hc(2,1,t.duration)," ")}}function K(t,e){1&t&&(s.Tb(0,"mat-header-cell",14),s.Ac(1," State "),s.Sb())}function M(t,e){if(1&t&&(s.Tb(0,"mat-cell"),s.Ac(1),s.Sb()),2&t){const t=e.$implicit;s.Cb(1),s.Cc(" ",t.state," ")}}function P(t,e){1&t&&s.Ob(0,"mat-header-row")}function j(t,e){1&t&&s.Ob(0,"mat-row")}const U=function(){return[5,10,20]};let X=(()=>{class t{constructor(t,e){this.trainingService=t,this.store=e,this.displayedColumns=["date","name","calories","duration","state"],this.dataSource=new O.k}ngOnInit(){this.store.select(r.c).subscribe(t=>{this.dataSource.data=t}),this.trainingService.fetchCompletedOrCancelledExercises()}doFilter(t){this.dataSource.filter=t.trim().toLowerCase()}ngAfterViewInit(){this.dataSource.sort=this.sort,this.dataSource.paginator=this.paginator}}return t.\u0275fac=function(e){return new(e||t)(s.Nb(u.a),s.Nb(a.a))},t.\u0275cmp=s.Hb({type:t,selectors:[["app-past-trainings"]],viewQuery:function(t,e){var c;1&t&&(s.Dc(I.a,!0),s.Dc(z.a,!0)),2&t&&(s.oc(c=s.cc())&&(e.sort=c.first),s.oc(c=s.cc())&&(e.paginator=c.first))},decls:22,vars:6,consts:[["fxLayoutAlign","center center"],["fxFlex","40%"],["type","text","matInput","","placeholder","filter here...",3,"keyup"],["matSort","",3,"dataSource"],["matColumnDef","date"],["mat-sort-header","",4,"matHeaderCellDef"],[4,"matCellDef"],["matColumnDef","name"],["matColumnDef","calories"],["matColumnDef","duration"],["matColumnDef","state"],[4,"matHeaderRowDef"],[4,"matRowDef","matRowDefColumns"],["showFirstLastButtons","",3,"pageSize","pageSizeOptions"],["mat-sort-header",""]],template:function(t,e){1&t&&(s.Tb(0,"div",0),s.Tb(1,"mat-form-field",1),s.Tb(2,"input",2),s.bc("keyup",(function(t){return e.doFilter(t.target.value)})),s.Sb(),s.Sb(),s.Sb(),s.Tb(3,"mat-table",3),s.Rb(4,4),s.zc(5,$,2,0,"mat-header-cell",5),s.zc(6,L,3,3,"mat-cell",6),s.Qb(),s.Rb(7,7),s.zc(8,F,2,0,"mat-header-cell",5),s.zc(9,N,2,1,"mat-cell",6),s.Qb(),s.Rb(10,8),s.zc(11,R,2,0,"mat-header-cell",5),s.zc(12,E,3,3,"mat-cell",6),s.Qb(),s.Rb(13,9),s.zc(14,H,2,0,"mat-header-cell",5),s.zc(15,Q,3,3,"mat-cell",6),s.Qb(),s.Rb(16,10),s.zc(17,K,2,0,"mat-header-cell",5),s.zc(18,M,2,1,"mat-cell",6),s.Qb(),s.zc(19,P,1,0,"mat-header-row",11),s.zc(20,j,1,0,"mat-row",12),s.Sb(),s.Ob(21,"mat-paginator",13)),2&t&&(s.Cb(3),s.kc("dataSource",e.dataSource),s.Cb(16),s.kc("matHeaderRowDef",e.displayedColumns),s.Cb(1),s.kc("matRowDefColumns",e.displayedColumns),s.Cb(1),s.kc("pageSize",1)("pageSizeOptions",s.lc(5,U)))},directives:[m.b,p.c,m.a,D.b,O.j,I.a,O.c,O.e,O.b,O.g,O.i,z.a,O.d,I.b,O.a,O.f,O.h],pipes:[o.e,o.f],styles:[""]}),t})();var q=c("0IaG");let G=(()=>{class t{constructor(t){this.data=t}}return t.\u0275fac=function(e){return new(e||t)(s.Nb(q.a))},t.\u0275cmp=s.Hb({type:t,selectors:[["app-stop-training"]],decls:10,vars:3,consts:[["mat-dialog-title",""],["mat-button","",3,"mat-dialog-close"]],template:function(t,e){1&t&&(s.Tb(0,"h1",0),s.Ac(1,"Are you sure ?"),s.Sb(),s.Tb(2,"mat-dialog-content"),s.Tb(3,"p"),s.Ac(4),s.Sb(),s.Sb(),s.Tb(5,"mat-dialog-actions"),s.Tb(6,"button",1),s.Ac(7,"Yes"),s.Sb(),s.Tb(8,"button",1),s.Ac(9,"No"),s.Sb(),s.Sb()),2&t&&(s.Cb(4),s.Cc("You already got ",e.data.progress,"%"),s.Cb(2),s.kc("mat-dialog-close",!0),s.Cb(2),s.kc("mat-dialog-close",!1))},directives:[q.g,q.e,q.c,C.a,q.d],encapsulation:2}),t})();var B=c("IzEk");let J=(()=>{class t{constructor(t,e,c){this.dialog=t,this.trainingService=e,this.store=c,this.progress=0}ngOnInit(){this.startOrResumeTimer()}startOrResumeTimer(){this.store.select(r.a).pipe(Object(B.a)(1)).subscribe(t=>{this.timer=setInterval(()=>{this.progress=this.progress+5,this.progress>=100&&(this.trainingService.completeExercise(),clearInterval(this.timer))},t.duration/100*1e3)})}onStop(){clearInterval(this.timer),this.dialog.open(G,{data:{progress:this.progress}}).afterClosed().subscribe(t=>{t?this.trainingService.cancelExercise(this.progress):this.startOrResumeTimer()})}}return t.\u0275fac=function(e){return new(e||t)(s.Nb(q.b),s.Nb(u.a),s.Nb(a.a))},t.\u0275cmp=s.Hb({type:t,selectors:[["app-current-training"]],decls:8,vars:2,consts:[["fxLayout","column","fxLayoutAlign","center center",1,"current-training"],["mode","determinate",3,"value"],["mat-raised-button","","color","accent",3,"click"]],template:function(t,e){1&t&&(s.Tb(0,"section",0),s.Ob(1,"mat-progress-spinner",1),s.Tb(2,"h1"),s.Ac(3),s.Sb(),s.Tb(4,"p"),s.Ac(5,"Keep on going, you can do it!"),s.Sb(),s.Tb(6,"button",2),s.bc("click",(function(){return e.onStop()})),s.Ac(7,"Stop"),s.Sb(),s.Sb()),2&t&&(s.Cb(1),s.kc("value",e.progress),s.Cb(2),s.Cc("",e.progress,"%"))},directives:[m.c,m.b,S.a,C.a],styles:[".current-training[_ngcontent-%COMP%]{padding:30px}"]}),t})();function V(t,e){1&t&&(s.Tb(0,"mat-tab-group"),s.Tb(1,"mat-tab",1),s.Ob(2,"app-new-training"),s.Sb(),s.Tb(3,"mat-tab",2),s.Ob(4,"app-past-trainings"),s.Sb(),s.Sb())}function Y(t,e){1&t&&s.Ob(0,"app-current-training")}const _=[{path:"",component:(()=>{class t{constructor(t){this.store=t}ngOnInit(){this.ongoingTraining$=this.store.select(r.d)}}return t.\u0275fac=function(e){return new(e||t)(s.Nb(a.a))},t.\u0275cmp=s.Hb({type:t,selectors:[["app-training"]],decls:4,vars:6,consts:[[4,"ngIf"],["label","New Excercise"],["label","Past Excercise"]],template:function(t,e){1&t&&(s.zc(0,V,5,0,"mat-tab-group",0),s.gc(1,"async"),s.zc(2,Y,1,0,"app-current-training",0),s.gc(3,"async")),2&t&&(s.kc("ngIf",!s.hc(1,2,e.ongoingTraining$)),s.Cb(2),s.kc("ngIf",s.hc(3,4,e.ongoingTraining$)))},directives:[o.m,b.b,b.a,A,X,J],pipes:[o.b],styles:[""]}),t})()}];let W=(()=>{class t{}return t.\u0275mod=s.Lb({type:t}),t.\u0275inj=s.Kb({factory:function(e){return new(e||t)},imports:[[i.c.forChild(_)],i.c]}),t})(),Z=(()=>{class t{}return t.\u0275mod=s.Lb({type:t}),t.\u0275inj=s.Kb({factory:function(e){return new(e||t)},imports:[[W,n.a,a.b.forFeature("training",r.e)]]}),t})()}}]);